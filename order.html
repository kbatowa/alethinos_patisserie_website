<!doctype html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#6b2bd1">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Alethinos">
<link rel="manifest" href="./manifest.json">
<link rel="apple-touch-icon" href="./icons/icon-192.png">
<link rel="stylesheet" href="./app.css">
<title>Commander â€” Alethinos</title>
</head>
<body>
  <div class="topbar">
    <div class="brand">
      <div class="brand-left">
        <img src="./assets/logo.png" alt="Logo Alethinos" class="brand-logo">
        <div class="brand-text">
          <h1>ğŸ›µ Commander</h1>
        <div class="mini">Deux chemins : Express (maintenant) ou Plus tard (Ã©vÃ©nement).</div>
              </div>
      </div>
      <a class="pill" href="./cart.html">ğŸ§º Panier <span class="badge" data-cart-badge></span></a>
    </div>
  </div>

  <div class="container">
    <div class="card">
      <h2>ğŸš€ Commande Express â€” PrÃªte Ã  emporter</h2>
      <p>Pour une prÃ©paration immÃ©diate. Vous envoyez une commande claire, Alethinos confirme.</p>

      <form id="orderNowForm">
        <label><strong>Nom *</strong></label>
        <input class="input" name="name" type="text" placeholder="Ex: Koffi Mensah" required>

        <div style="height:10px;"></div>

        <label><strong>TÃ©lÃ©phone *</strong></label>
        <input class="input" name="phone" type="tel" placeholder="Ex: 90 12 34 56" required>

        <div style="height:10px;"></div>

        <label><strong>Heure de retrait</strong></label>
        <select class="input" name="pickupTime">
          <option>DÃ¨s que possible</option>
          <option>Dans 30 minutes</option>
          <option>Dans 1 heure</option>
          <option>Heure spÃ©cifique (prÃ©cisez en notes)</option>
        </select>

        <div style="height:10px;"></div>

        <label><strong>Commande *</strong></label>
        <textarea class="input" name="order" rows="4" placeholder="Ex: 1 Pizza Alethinos, 2 Burger Mowgli, 1 Comboâ€¦" required></textarea>

        <div style="height:10px;"></div>

        <label><strong>Notes (allergies, modifications)</strong></label>
        <textarea class="input" name="notes" rows="2" placeholder="Ex: sans oignons, sauce Ã  partâ€¦"></textarea>

        <div style="height:12px;"></div>
        <button class="btn wa" type="submit">Envoyer sur WhatsApp (Express)</button>
      </form>

      <div class="mini" style="margin-top:10px;">Si vous avez dÃ©jÃ  rempli un panier, vous pouvez aussi passer par <strong>Paiement</strong>.</div>
    </div>

    <div class="hr"></div>

    <div class="card">
      <h2>ğŸ“… Commande pour plus tard / Ã‰vÃ©nement</h2>
      <p>Commandes en gros, Ã©vÃ©nements, et planification. Un message guidÃ© pour gagner du temps.</p>
      <button class="btn wa" id="laterBtn">Commander via WhatsApp (Planification)</button>
      <div class="mini" style="margin-top:10px;">Vous pourrez modifier le message avant dâ€™envoyer.</div>
    </div>

    <div class="hr"></div>

    <div class="notice">
      <strong>Pro tip :</strong> Pour Ã©viter la confusion en cuisine, utilisez â€œExpressâ€ pour â€œmaintenantâ€, et â€œPlus tardâ€ pour tout ce qui est planifiÃ©.
    </div>
  </div>

  <div class="cartbar" id="cartbar">
  <div class="inner" role="button" tabindex="0" onclick="location.href='./cart.html'">
    <div><strong>Voir le panier</strong> <span class="badge" data-cart-badge></span></div>
    <div><span id="cartbarTotal"></span></div>
  </div>
</div>
  <div class="navbar">
  <div class="inner">
    <a class="navlink" href="./menu.html"><div class="navicon">ğŸ•</div>Menu</a>
    <a class="navlink" href="./cart.html"><div class="navicon">ğŸ§º</div>Panier <span class="badge" data-cart-badge></span></a>
    <a class="navlink active" href="./order.html"><div class="navicon">ğŸ›µ</div>Commander</a>
    <a class="navlink" href="./index.html#infos"><div class="navicon">ğŸ“</div>Infos</a>
  </div>
</div>
  <script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./sw.js");
  }
</script>
<script type="module">
  import { updateCartBadges, updateCartBar } from "./cart.js";
  window.addEventListener("DOMContentLoaded", () => { updateCartBadges(); updateCartBar(); });
</script>

  <script>
    document.addEventListener("DOMContentLoaded", function(){
      const phoneNumber = "22870398573";

      const laterTemplate =
"Bonjour Alethinos ! ğŸ‘‹\n\n" +
"Je souhaite planifier une commande pour une date future.\n\n" +
"*Informations principales :*\n" +
"â€¢ Nom : [VOTRE NOM]\n" +
"â€¢ Date souhaitÃ©e : [DATE]\n" +
"â€¢ Heure souhaitÃ©e : [HEURE]\n" +
"â€¢ Pour : [FAMILLE / ANNIVERSAIRE / ENTREPRISE / AUTRE]\n" +
"â€¢ Nombre de personnes : [NOMBRE]\n\n" +
"*Commande prÃ©visionnelle :*\n" +
"[Ex : 50 Samoussa Viande, 20 Mini Pizzas, 5 Pizzas Alethinos, 20 Cocktails Combo...]\n\n" +
"*Budget estimatif / DÃ©tails supplÃ©mentaires :*\n" +
"[PrÃ©cisez ici]\n\n" +
"*Mes coordonnÃ©es :*\n" +
"TÃ©lÃ©phone : [VOTRE TÃ‰LÃ‰PHONE]\n\n" +
"Merci !";

      document.getElementById("laterBtn").addEventListener("click", function(){
        const __waUrl = "https://wa.me/" + phoneNumber + "?text=" + encodeURIComponent(laterTemplate);
        const __w = window.open(__waUrl, "_blank", "noopener,noreferrer");
        if(!__w){ window.location.href = __waUrl; }
      });

      const form = document.getElementById("orderNowForm");
      form.addEventListener("submit", function(e){
        e.preventDefault();
        const name = form.elements["name"].value.trim();
        const phone = form.elements["phone"].value.trim();
        const pickupTime = form.elements["pickupTime"].value.trim();
        const order = form.elements["order"].value.trim();
        const notes = form.elements["notes"].value.trim();
        const orderId = "EXP-" + Math.random().toString(36).slice(2,8).toUpperCase();

        const msg =
"ğŸ›µ *Commande Express â€” Alethinos*\n" +
"ID: *" + orderId + "*\n\n" +
"Nom: " + name + "\n" +
"TÃ©lÃ©phone: " + phone + "\n" +
"Retrait: " + pickupTime + "\n\n" +
"*Commande:*\n" +
order + "\n\n" +
"*Notes:*\n" +
(notes || "â€”") + "\n\n" +
"Merci !";

        const __waUrl = "https://wa.me/" + phoneNumber + "?text=" + encodeURIComponent(msg);
        const __w = window.open(__waUrl, "_blank", "noopener,noreferrer");
        if(!__w){ window.location.href = __waUrl; }
      });
    });
  </script>
</body>
</html>
